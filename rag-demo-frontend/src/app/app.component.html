<div class="container">
  <h1 class="title">RAG Demo App</h1>

  <div class="grid">
    <!-- Left Column -->
    <div class="column">
      <!-- Upload Section -->
      <div class="box">
        <h2>Upload File</h2>
        <input type="file" (change)="onFileSelected($event)" />
        <button (click)="upload()">Upload</button>
        <p class="message" *ngIf="uploadMessage">{{ uploadMessage }}</p>
      </div>

      <!-- Uploaded Files Section -->
      <div class="box">
        <h2>Danh sách file đã upload</h2>

        <table *ngIf="uploadedFiles.length > 0">
          <thead>
            <tr>
              <th>#</th>
              <th>File Name</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let f of uploadedFiles; let i = index">
              <td>{{ i + 1 }}</td>
              <td>{{ f.fileName }}</td>
            </tr>
          </tbody>
        </table>

        <p *ngIf="uploadedFiles.length === 0">Chưa có file nào được upload.</p>
      </div>
    </div>

    <!-- Right Column -->
    <div class="column">
      <!-- Search Section -->
      <div class="box">
        <h2>Tìm kiếm</h2>

        <div class="form-group">
          <input [(ngModel)]="query" placeholder="Nhập nội dung" />
          <button (click)="search()">Search</button>
        </div>

        <div *ngIf="results.length > 0" class="results">
          <table>
            <thead>
              <tr>
                <th>File</th>
                <th>Độ tương đồng</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let r of results">
                <td>{{ r.tenFile }}</td>
                <td>{{ r.doTuongDong === 0 ? "" : r.doTuongDong }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
